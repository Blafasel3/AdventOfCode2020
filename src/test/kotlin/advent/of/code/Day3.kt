package advent.of.code

import org.junit.Test
import java.math.BigInteger
import kotlin.test.assertTrue

class Day3 {

    @Test
    fun day3() {
        val lines = input.lines()
        var trees: BigInteger = getNumberOfTreesHit(lines, 1 to 1)
        trees *= getNumberOfTreesHit(lines, 3 to 1)
        trees *= getNumberOfTreesHit(lines, 5 to 1)
        trees *= getNumberOfTreesHit(lines, 7 to 1)
        trees *= getNumberOfTreesHit(lines, 1 to 2)
        println(trees)
    }

    private fun getNumberOfTreesHit(
        lines: List<String>,
        slope: Pair<Int, Int>
    ): BigInteger {
        val lineLength = lines[0].length
        var lineIndex = slope.second
        var columnIndex = 0
        var trees: BigInteger = BigInteger.ZERO
        while (lineIndex < lines.size) {
            columnIndex += slope.first
            if (columnIndex >= lineLength) {
                columnIndex -= lineLength
            }
            if (lines[lineIndex][columnIndex] == '#') {
                trees++
            }
            lineIndex += slope.second
        }
        println("$slope $trees")
        return trees
    }

    private val input = """
        ..#.#...#.#.#.##.....###.#....#
        ...........##.#...#.#..........
        ....#.....#..#.............#...
        .#....###..##...#...##...#.#..#
        #.......#.........#..#.......#.
        ...#.##..##...#.#......#.##.#..
        #.#..##.....#.....#..##........
        ...#.####...#.##...#...........
        .#...#..#..#....#.#.#.#.##.....
        ##.#..#.##..#......#..##.#.#..#
        .#.##.....#.#...............#.#
        ..##.#.....#.....##..##.#....#.
        #..#..........#...##........#..
        #..##.#.#...............#..#...
        ..#....#...#.......#.......#...
        .........#.#.##.#........#.....
        #...##....#..#.........#.#...##
        ...#.#...#...........#..#...#..
        ...#..#........#...#...........
        .#....##.#...#.#....#....##....
        ...#...#......#.#.......#...##.
        ####..........##....#..........
        #..#...........................
        #....#...####..##.#......#.#...
        ..#..#.....##.....#...#....#..#
        #.##......#..##........#.......
        ..........#.....#...#.#.#....##
        ....##...##..#........#...#..#.
        #..#..#...##..............##...
        ###.##..##.###...#....##.#..#..
        .#......#.................#.#..
        #.#..#.##.#.#.#.....#.........#
        ..##......#.......##........#..
        #..............#.##.#.....#....
        ............................##.
        ..#.##......#..........#....#..
        ..##.....#..##.#....#.......##.
        ..#.#.##.#.........#...........
        ...........##.#.#...#......###.
        #....#...#........#.#...#.#.###
        ..............#...#.....##....#
        #...#...#..............#..#...#
        .##..#.........#.##.#..#...##..
        .....#.........#..#..#.......#.
        .#......#.#.#....##..#...#..##.
        #....................#.#....#..
        ......#.....##............#....
        .#.....#......####.....#....##.
        ##.####.#..#..........#......#.
        ##....................#..##....
        .....#...#.#.##.#.###.....#....
        .#..#...####.#.#...#.#.....#...
        #.....##.........##.##.##.....#
        ....#....##.###.........#...###
        .......#........#.##.....#####.
        ...#.##..#...#...####.....##...
        ..#....#....#......#......#.#..
        ...#.#.#.........#.......#..#..
        .....#...........#.#........##.
        ..##...#.#.##.#.#.#...###.#....
        ..##.............###....#.#....
        #.......#....#..#...#..##..#...
        ....##..#.......####....#..#.##
        ##....#...#.#.#...#...#........
        ....#.#................#...#...
        ...#.....#.#.......##....#.#..#
        #....##.#...#.#..#.#.........#.
        #..##.........##.....#...#.....
        ....#.....#.#..#..##..##.##...#
        #.....#...#.#.#.##....#.#.##...
        .#.#........#..##.......#...#.#
        ..###.....#..#.##....#...#....#
        ...#..###...#...#.......#..#...
        .#....##.......#.#..........##.
        ...#.#.............##.....##...
        ..#..#...#.....#...#...........
        .#.#......#.##....#.....#......
        ........#.#.....#.#...#..#.#..#
        #.....#.#.....#.##..#.#....#.#.
        ..#..###.#.#........#.....##..#
        #.#....#......#.#....###..#...#
        ...#.#....#..#.##.....#...#....
        ....##....#.#...#.........#..##
        .#......#...#.............#..#.
        #........#........#.#.....##...
        ..##..#.##..#........#.........
        .....#...#...#..#.....#.#.##.#.
        ..#..#..#.........#...#.......#
        ....#.....#.......#.##.#.##..##
        ......#.......##...#......#....
        ....#....##.......###.#......#.
        .....#..#.#........#....#.....#
        #...#...#....#...###........#..
        #...........####.......#.#..#.#
        ..###....#..........#...#.###..
        ....#.#.....#....#..#.....#.##.
        ...##.#..#..#.......#......#.#.
        ....#......###..#.....#.....#..
        .....#.#.#.....#.##.#....####..
        .##....#.....#.#....##..#......
        #..#.....#..#...#....#.#.......
        .##.#..####..#.##.#......#.....
        ......#....#.......##.##....#..
        ...#....#....#..##.......##.###
        ..##..........##.............#.
        .#...#.#...##..##.....#..#.....
        ....#.#.##...................#.
        .......#.#..#....#.....#.......
        .#.#..#....####...#.#.##....#..
        .#.##...#..#..#...#.#.......#..
        ##.#.....##.........#.......#..
        .##...#.....#.........##.#....#
        .............#..#............##
        ...##.......#.....#.......#.##.
        ##..##.........................
        .##.#........#........#........
        .....#................#.#......
        .............#....#....##....#.
        #..##...##...#..#.#............
        .......#...####.#..#..#.....##.
        ..#.#..#......#.....#.#.#.....#
        ...#..##........#..#.#....#.#..
        .#.....#..###..#....#.##.#...#.
        #.#..#.##.#..#......#.###...#..
        ##..#.#..###....##.#...#...##.#
        ##..#.........#...##......#....
        #.#...#.#..#..........#.......#
        .......#.#.......#.....##..#...
        ........#..##............##.#..
        ........##.....#........#..#...
        #..##.#..###......##...........
        ..#.....#.#.#....#...#.#..#..##
        #...............#.......#.#.##.
        #..#.....#....#............#.#.
        ...#....#...#....#..#..###.....
        ..#....#.#.....#..#......##.#.#
        .#.#....#..#...#....#........#.
        ..##....##....#.....#.#........
        .#...#....##..##.....##.....##.
        .#...........#....##...##.#....
        ...#.....#......###.##.#.......
        ......#.#..##.#.#....#...#...##
        ....#...###.##....#.#.....#....
        .......#.....#......#.....##..#
        .####.#...##..#....#...........
        ................###...#....#..#
        ...#...#.....###.#.##.......#..
        ..#....#...##...#.###......#.#.
        #...#......#............#.....#
        #.........#...............#..#.
        ...#.##.....#............#.....
        ........#......##..#..#..#.#..#
        ....#....#.....#.#.....##..#...
        .....#....#..##.....#..........
        .##....#..#...........##.......
        #......##.....#...#.....#......
        ...#.....#......#.#....#.......
        ...#................##...#..#..
        ........#..........#....#......
        ......#....#.#.#...........#.#.
        .#............#....##.......##.
        #.......#.....#...##.#..##.....
        .#.....#.##..#..#....#.#..#.#.#
        ....#...............###........
        #####...........#..#.......#..#
        ...#.......#...#.#............#
        #...#..#.#...#.#...#.##.....##.
        .#..#..#..#.....#....#...#.....
        .#...#......#.......#.........#
        .#....#.....#...#...#..#....#..
        #....#....#.......#.....##.....
        .#...#.#.##.#....#..##........#
        ..##...#............#..........
        ..........#..#..#...#....#.....
        ..#.......#....#.....##..##....
        .#...#......#...#..###...#...#.
        ..##...#......#...#.#.#...#....
        .....#..#.#.#.#.#...#....##..#.
        ##..#..##....#.#........##.#...
        .##..#.#...##..#....#..#.......
        .....#...#...#..#.#..#......#..
        .#.....##.##..#....####..#....#
        ......##.................#....#
        ....##.......###...#.##...##.#.
        ...#...#.................##.#..
        .#.....##...#...#.....#.....##.
        ##.........####..#...#...#....#
        ...##.....#......#.###..#......
        .....###..##.#.......###..##...
        #....#...#.#...#...#.#....#..#.
        #...#.........##.#.........###.
        #....#..###..........##........
        .###.....#.#.....#........##..#
        ....#.........##..#..#.#.#..#..
        ..#......#...........#..##...#.
        ...#.#..#..#...#.##..#..#.....#
        .#...#...#....................#
        ..#..##..#.............#.....#.
        .....###.#.#.#...##..#.##....#.
        ..#...####..##.#....#...#...#..
        .....#..#........#.#.#..#.##...
        #.#.........####..#...#.#......
        ..............#..#........#....
        ....#........#......#.........#
        #..#.##......#.#.......#....#..
        ....#..............#.#.#..#....
        #.#......#.....##.......#..##..
        .#.#..........#....#......#....
        .....#.......#.##.....#......##
        ...#...#.##.............####...
        ..#....##...#...##..#.#..##.#..
        ..#.........##.......###.#.....
        ..#.........#####..##...#......
        ..#.#...#.......#.####......##.
        ......#.#.#....#......####....#
        .###...........#...#..#..#..##.
        ..#...#..##.##...#.#.##.....#..
        .....#..#....##.......#...#....
        ......#.....#.........#..#..#..
        ...#..#.........##.....##.#...#
        ....##...#......#..#.....#.....
        ....#..#....#....#........##...
        ##.....#.......#.....#.#.#..#..
        .....#..##.....##.##.#.........
        .#.#..##.............#.#.......
        ......#.##.#.....#.#......#..#.
        ..........#.#..#....#.#.#.#..##
        ...##.....#..#...#...#...##....
        ........#.#......#..###..#.....
        ..#.##......#.......#.......#..
        ...#....##.##.........#.#......
        ......#....#.#.........#......#
        .....#...#....#...#......#..#..
        .##...#......#.........#...#.#.
        ..#.#.#......#....#............
        ..#.....##.............#.##.##.
        #......#......#...##.......#.#.
        ##........#.....#..............
        .#.###.................#.#....#
        ........##.#..##........#.#....
        .......###...#...##.#..#....#..
        .#..#....#..#......##......#...
        .#...#....#..........##..##.#..
        .#..###.......#............#...
        ...#.....###.#..#........#.#.#.
        ...#....#..#.##..........#.#.#.
        .#..##..#.....#...........#....
        #...#...##....#..#....##.......
        #..#......#................#...
        #..##....#.#..#......#.#.#.....
        ##.#..#...#.....#.#...#......##
        #....#.#.#....#.....##.....##..
        ....#...##.#...####.#.#.#.#..#.
        .....#.#....#..#.....#..#......
        .........#.#...................
        ........#.....####......#..#..#
        .#.#.##.#...#.#......#...##.##.
        .#......#.#.#...#..#.......#...
        ..#......#.##.##.#.#....#......
        ..........#.#...###............
        .##..#..#.#.#..#.....#..#.#....
        ......#.......#.#..#.#....#...#
        .#.......###......#...#.#.#....
        .............##..#..#...#....#.
        ....#......#.#...#.#...#...#...
        ..#....#.......#.#..#..#.#..#.#
        .#..#.#...#.....#.#...#####...#
        .##............#....#..........
        #.......####...#.#.#...........
        ...#.......##.#..........#....#
        ..#.#......#.......##.....#..##
        #......#.###..#......#......#.#
        ##....#..#....#.##....#..#.....
        ...##...#.#....#.#.......#.....
        #...####....#..#.#..#.##....###
        .....#..#..........###..#......
        .#..#..#...#....#.##..#..#.....
        #..#.....#....#..#.##...##.....
        .....###.#..#.......#...###.##.
        #..#........#.#..#.#.........#.
        ....##........................#
        .#....#.#.#.#.#...#......#....#
        #....#...#.##.......#.#.###....
        ..........###..##....#..##.#...
        ...##..###...#.#.#.......##...#
        ##.#...#..#.....###....#.......
        ..#..##....###........##....###
        .....##..#...#..#.....#..#....#
        #................#....#...#..##
        #....#.#....#..###.#.#...#..#.#
        ........##.#...#.#.#.#...#.....
        ..#..###....#......##.#...##...
        ..#..##....#.##..#.....#.....#.
        .#.#...#.....#..#..#......##.#.
        ........#.#...#..##....#..#....
        ...##...#...#...#...##...##..#.
        .......#..#..#....#.#..#...##..
        .#.....#.##........#...#.#.....
        ##.#..#....#.#....#.#....#...#.
        ..#.#......#.......##...#....#.
        #.#..####..#........#.......###
        ....#.......#.......##.#...#.#.
        ..#..#.#.............#..#......
        ........###.....##....#.......#
        ...#.....#...#...#....#.###....
        #...##.#........#..#...##..#..#
        ...##..#....#....#.#.#...#.#...
        #......#.....#....###......##..
        .....#.........####...##..#....
        .......#...##...#..#..#.#......
        .#.#....#.....#.......#........
        ...##...#....##..#.....###.....
        .#....#........##......#....#.#
        .........#.#.#.#...........#.#.
        ....#.#..##......#.#.#..##.....
        .........#.....##....#.........
        ....#.............#...........#
        ...#..##........#.....###......
        #....#....#......#..#..#..#.#..
        #......##.....#..#....#..#.#...
        #..............#....#.#....###.
        ..##..#..#...#...##........##..
        ..#.##....#..#......###..#.....
    """.trimIndent()
}